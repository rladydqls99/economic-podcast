# PRD: 한국 경제 자동 팟캐스트 쇼츠 생성 시스템

**문서 버전:** 1.0
**작성일:** 2025-12-17
**프로젝트명:** Economic Podcast Shorts Generator
**문서 상태:** Draft

---

## 목차

1. [문서 개요](#1-문서-개요)
2. [제품 비전 및 목표](#2-제품-비전-및-목표)
3. [제품 범위](#3-제품-범위)
4. [사용자 시나리오](#4-사용자-시나리오)
5. [기능 요구사항](#5-기능-요구사항)
6. [기술 요구사항](#6-기술-요구사항)
7. [시스템 아키텍처](#7-시스템-아키텍처)
8. [데이터 플로우](#8-데이터-플로우)
9. [비기능 요구사항](#9-비기능-요구사항)
10. [제약사항 및 가정](#10-제약사항-및-가정)
11. [성공 지표](#11-성공-지표)
12. [일정 및 마일스톤](#12-일정-및-마일스톤)
13. [향후 확장 계획](#13-향후-확장-계획)
14. [부록](#14-부록)

---

## 1. 문서 개요

### 1.1. 문서 목적

본 문서는 매일 자동으로 한국 경제 이슈를 요약한 1분짜리 팟캐스트 쇼츠를 생성하고 YouTube에 업로드하는 시스템의 제품 요구사항을 정의합니다.

### 1.2. 용어 정의

| 용어           | 정의                                                   |
| -------------- | ------------------------------------------------------ |
| 쇼츠 (Shorts)  | YouTube의 세로형 짧은 동영상 형식 (최대 60초)          |
| Veo3           | Google의 최신 텍스트-투-비디오 생성 AI 모델           |
| LLM            | Large Language Model (대규모 언어 모델)                |
| 이슈           | 반복적으로 언급되는 경제 뉴스 주제                     |
| 대본           | 팟캐스트에서 읽을 스크립트                             |
| 폴링 (Polling) | 주기적으로 상태를 확인하는 방식                        |

---

## 2. 제품 비전 및 목표

### 2.1. 제품 비전

**"밤 11시, 침대에서 쇼츠를 넘기는 직장인을 3초 안에 멈추게 하는 초자극형 경제 쇼츠"**

### 2.2. 타겟 오디언스

- **핵심 페르소나:** 25-40대 직장인 ("퇴근 후 침대 스크롤러")
- **소비 시간대:** 밤 11시-자정 (자기 직전)
- **심리 상태:** 내일 출근 전 대화 소재 찾기, 가벼운 자극과 정보 모두 원함
- **주의 집중:** 3초 내 스크롤 vs 시청 결정

### 2.3. 제품 목표

1. **초자극형 필터링:** 32개 키워드 기반 "내 지갑 직접 타격" 뉴스만 선별
2. **2단계 파이프라인:** Gemini 기반 제목+본문 필터링 (60초 완료)
3. **45초 스토리텔링:** 기승전결 구조로 끝까지 보게 만들기
4. **자동화 95% 이상:** 매일 자정 전 업로드

---

## 3. 제품 범위

### 3.1. 포함 범위 (In-Scope)

#### 뉴스 수집 전략
- **32개 키워드** 기반 RSS/크롤링 (Layer 1: 내 지갑 타격, Layer 2: 회사 트렌드, Layer 3: 글로벌)
- **2단계 필터링:** Gemini 제목 필터링 (100→15) + 본문 필터링 (15→3-5)
- **노이즈 제거:** 11가지 패턴 (광고, 페이월, 저작권 등) 자동 제거

#### 자동화 파이프라인
- 매일 22:00 뉴스 수집 및 필터링 (60초 완료)
- Gemini 기반 45초 바이럴 대본 생성
- Veo3 영상 제작 및 YouTube Shorts 업로드
- 로그 및 에러 모니터링

### 3.2. 제외 범위 (Out-of-Scope)

- 미국 경제 뉴스 (Phase 2에서 고려)
- 다국어 지원 (Phase 2에서 고려)
- 사용자 커스터마이징 기능
- 실시간 뉴스 알림
- 모바일 앱 개발
- 댓글 관리 자동화

---

## 4. 사용자 시나리오

### 4.1. 주요 시나리오: 일일 자동 콘텐츠 생성

**사용자:** 시스템 스케줄러
**목표:** 매일 22시에 당일 경제 뉴스를 요약한 쇼츠 영상을 자동으로 생성하고 업로드

**전제 조건:**

- Express 서버가 정상 실행 중
- 모든 외부 API 키가 유효함
- YouTube OAuth 토큰이 갱신 가능한 상태

**주요 흐름:**

1. 매일 22:00, node-cron이 자동 작업을 트리거
2. 시스템이 오늘(0시~22시) 한국 경제 뉴스를 수집
3. LLM이 수집된 뉴스에서 2~4개 핵심 이슈를 추출
4. LLM이 1분 분량 팟캐스트 대본을 생성
5. Veo3가 대본을 기반으로 AI 영상 제작
6. 시스템이 영상 생성 완료를 폴링으로 확인
7. YouTube Data API를 통해 Shorts로 업로드
8. 업로드 결과를 로그 파일에 기록

**후속 조건:**

- 새로운 YouTube Shorts 영상이 채널에 게시됨
- 로그 파일에 성공 기록이 저장됨

**예외 흐름:**

- **뉴스 수집 실패:** 재시도 3회, 실패 시 관리자에게 알림 전송
- **LLM API 실패:** 백업 프롬프트로 재시도
- **Veo3 생성 실패:** 에러 로그 기록 및 알림
- **YouTube 업로드 실패:** OAuth 토큰 갱신 시도, 실패 시 알림

### 4.2. 보조 시나리오: 운영자 모니터링

**사용자:** 콘텐츠 운영자
**목표:** 자동 생성된 콘텐츠의 품질과 시스템 상태 확인

**주요 흐름:**

1. 운영자가 매일 아침 로그 파일 확인
2. 전날 생성된 영상의 YouTube 링크 확인
3. 대본 품질 및 이슈 선정의 적절성 평가
4. 필요 시 수동으로 영상 수정 또는 재업로드

---

## 5. 기능 요구사항

### 5.1. FR-001: 뉴스 수집 및 필터링 모듈

**우선순위:** P0 (필수)

**설명:** 32개 키워드 기반 RSS 수집 + Gemini 2단계 필터링으로 초자극형 뉴스 선별 (60초 완료)

**2단계 파이프라인:**

```
Step 1: RSS 수집 (10초)
  - 32개 키워드 (내 지갑, 회사, 글로벌)
  - 100개 뉴스 메타데이터 수집

Step 2A: Gemini 제목 필터링 (2초)
  - 100개 → 15개 후보 선별
  - The Hook Test: "헐 진짜??" 반응 유도

Step 2B: Playwright 본문 크롤링 (45초)
  - 15개만 선별적 크롤링
  - Cheerio (정적) + Playwright (동적)

Step 2C: 노이즈 제거 (0.1초)
  - 11가지 패턴 제거 (광고, 페이월, 저작권 등)
  - 800자 정제 (문장 완결성 유지)

Step 3: Gemini 본문 필터링 (3초)
  - 15개 → 3-5개 최종 선정
  - Action Trigger + 45초 Rule + 바이럴 DNA 적용
```

**기술적 의존성:**
- RSS: rss-parser, Cheerio, Playwright
- AI: Gemini API (Google)
- 유틸: string-similarity, 정규식

---

### 5.2. FR-002: 대본 생성 모듈

**우선순위:** P0 (필수)

**설명:** Gemini로 45초 바이럴 쇼츠 대본 자동 생성

**대본 구조 (45초 Rule):**
- Hook (0-3초): "삼성전자 주가 -5% 급락!" (충격적 사실)
- 문제 (3-15초): 배경 설명 (엔비디아 신제품 발표)
- 영향 (15-40초): "내 월급에 미치는 영향" (개인 관련성)
- 결론 (40-45초): "내일 출근해서 동료한테 얘기해보세요" (행동 유도)

**기술적 의존성:**
- Gemini API (Google)

---

### 5.3. FR-003: Veo3 영상 제작 모듈

**우선순위:** P0 (필수)

**설명:** 생성된 대본을 Veo3 API로 AI 영상 제작 (1080x1920 해상도, 60초 이하)

**기술적 세부사항:**
- Google Vertex AI를 통한 Veo3 API 연동
- 텍스트-투-비디오 생성 (프롬프트 기반)
- 비동기 작업 처리 및 상태 확인
- 생성된 영상 다운로드 및 로컬 저장

**기술적 의존성:** Google Vertex AI (Veo3)

---

### 5.4. FR-004: YouTube Shorts 업로드 모듈

**우선순위:** P0 (필수)

**설명:** 완성된 영상을 YouTube Shorts로 업로드 (OAuth 2.0, 자동 메타데이터 설정)

**기술적 의존성:** YouTube Data API v3, googleapis

---

### 5.5. FR-005: 스케줄링 및 자동화 모듈

**우선순위:** P0 (필수)

**설명:** 매일 22:00 KST에 전체 파이프라인 자동 실행 (node-cron)

**기술적 의존성:** node-cron

---

### 5.6. FR-006: 로깅 및 모니터링 모듈

**우선순위:** P1 (높음)

**설명:** 모든 주요 작업 및 에러 로깅 (날짜별 파일, Slack 알림)

**기술적 의존성:** winston, Slack Webhook

---

## 6. 기술 요구사항

### 6.1. 기술 스택

**백엔드:**

- Node.js 18.x 이상
- TypeScript 5.x
- Express.js 4.x

**주요 라이브러리:**

- node-cron: 스케줄링
- axios: HTTP 클라이언트
- cheerio: 정적 HTML 파싱
- playwright: 동적 콘텐츠 크롤링 (헤드리스 브라우저)
- rss-parser: RSS 피드 파싱
- string-similarity: 텍스트 유사도 계산
- winston: 로깅
- dotenv: 환경 변수 관리
- googleapis: YouTube API 클라이언트
- zod: 런타임 타입 검증

**외부 API:**

- Gemini API (Google)
- Veo3 via Google Vertex AI
- YouTube Data API v3
- Google News RSS

### 6.2. 필수 환경 변수

```
GEMINI_API_KEY=
GOOGLE_CLOUD_PROJECT_ID=
GOOGLE_VERTEX_AI_LOCATION=
GOOGLE_APPLICATION_CREDENTIALS=
YOUTUBE_CLIENT_ID=
YOUTUBE_CLIENT_SECRET=
YOUTUBE_REFRESH_TOKEN=
SLACK_WEBHOOK_URL=
PORT=3000
NODE_ENV=production
```

---

## 7. 시스템 아키텍처

### 7.1. 아키텍처 다이어그램

```
┌─────────────────────────────────────────────────────────────────┐
│                         Express Server                           │
│                                                                   │
│  ┌──────────────────────────────────────────────────────────┐  │
│  │                   Scheduler (node-cron)                   │  │
│  │                    매일 22:00 KST 실행                    │  │
│  └──────────────────────────────────────────────────────────┘  │
│                              │                                    │
│                              ▼                                    │
│  ┌──────────────────────────────────────────────────────────┐  │
│  │              Daily Job Orchestrator                       │  │
│  │         (runKoreaDailyJob 메인 실행 함수)                │  │
│  └──────────────────────────────────────────────────────────┘  │
│                              │                                    │
│       ┌──────────────────────┼──────────────────────┐           │
│       ▼                      ▼                       ▼           │
│  ┌─────────┐          ┌──────────┐           ┌──────────┐      │
│  │  뉴스    │          │  이슈    │           │  대본    │      │
│  │  수집    │  ───►    │  추출    │  ───►     │  생성    │      │
│  │  모듈    │          │  모듈    │           │  모듈    │      │
│  └─────────┘          └──────────┘           └──────────┘      │
│       │                                             │            │
│       │                                             ▼            │
│       │                                      ┌──────────┐       │
│       │                                      │  Veo3    │       │
│       │                                      │ 영상제작 │       │
│       │                                      │  모듈    │       │
│       │                                      └──────────┘       │
│       │                                             │            │
│       │                                             ▼            │
│       │                                      ┌──────────┐       │
│       │                                      │ YouTube  │       │
│       │                                      │ 업로드   │       │
│       │                                      │  모듈    │       │
│       │                                      └──────────┘       │
│       │                                             │            │
│       └─────────────────┬───────────────────────────┘           │
│                         ▼                                        │
│              ┌──────────────────┐                               │
│              │   로깅 & 모니터링  │                               │
│              │      모듈         │                               │
│              └──────────────────┘                               │
└─────────────────────────────────────────────────────────────────┘
                         │
          ┌──────────────┼──────────────┐
          ▼              ▼               ▼
    ┌─────────┐    ┌─────────┐    ┌─────────┐
    │  로그    │    │  영상    │    │  대본    │
    │  파일    │    │  파일    │    │  파일    │
    └─────────┘    └─────────┘    └─────────┘
```

### 7.2. 외부 서비스 연동

```
┌─────────────────────────────────────────────────────────────┐
│                      뉴스 소스                               │
├────────────────┬────────────────┬───────────────────────────┤
│  언론사 RSS    │  Google News   │  웹 크롤링                │
└────────────────┴────────────────┴───────────────────────────┘
         │                │                    │
         └────────────────┴────────────────────┘
                          │
                          ▼
         ┌────────────────────────────────┐
         │      Express Server            │
         │      (뉴스 수집 모듈)          │
         └────────────────────────────────┘
                          │
                          ▼
         ┌────────────────────────────────┐
         │        Gemini API              │
         │   (필터링 + 대본 생성)         │
         └────────────────────────────────┘
                          │
                          ▼
         ┌────────────────────────────────┐
         │  Veo3 via Vertex AI            │
         │       (영상 생성)              │
         └────────────────────────────────┘
                          │
                          ▼
         ┌────────────────────────────────┐
         │    YouTube Data API v3         │
         │       (영상 업로드)            │
         └────────────────────────────────┘
                          │
                          ▼
         ┌────────────────────────────────┐
         │     Slack Webhook              │
         │    (에러 알림 전송)            │
         └────────────────────────────────┘
```

### 7.3. 디렉토리 구조

```
economic-podcast/
├── src/
│   ├── app.ts                    # Express 앱 초기화
│   ├── server.ts                 # 서버 시작
│   ├── config/
│   │   ├── env.ts               # 환경 변수 설정
│   │   └── constants.ts         # 상수 정의
│   ├── scheduler/
│   │   └── daily-job.ts          # 스케줄러 설정
│   ├── modules/
│   │   ├── news-collector/
│   │   │   ├── google-news/
│   │   │   │   ├── collector.ts      # RSS에서 기사 목록 수집
│   │   │   │   └── extractor.ts      # 각 링크의 본문 추출
│   │   │   ├── naver-news/
│   │   │   │   ├── collector.ts      # 네이버 API/크롤링
│   │   │   │   └── extractor.ts      # 네이버 기사 본문 추출
│   │   │   ├── shared/
│   │   │   │   ├── playwright-manager.ts  # 브라우저 풀 관리
│   │   │   │   └── cheerio-utils.ts       # 공통 유틸
│   │   │   ├── index.ts              # 메인 통합 클래스
│   │   │   └── types.ts
│   │   ├── issue-extractor/
│   │   │   ├── index.ts
│   │   │   ├── keyword-analyzer.ts
│   │   │   ├── llm-extractor.ts
│   │   │   └── types.ts
│   │   ├── script-generator/
│   │   │   ├── index.ts
│   │   │   ├── prompt-templates.ts
│   │   │   └── types.ts
│   │   ├── video-generator/
│   │   │   ├── index.ts
│   │   │   ├── veo3-client.ts
│   │   │   └── types.ts
│   │   ├── youtube-uploader/
│   │   │   ├── index.ts
│   │   │   ├── oauth.ts
│   │   │   ├── uploader.ts
│   │   │   └── types.ts
│   │   └── logger/
│   │       ├── index.ts
│   │       └── slack-notifier.ts
│   └── utils/
│       ├── date-time.ts
│       ├── file-handler.ts
│       └── retry.ts
├── data/
│   ├── scripts/                 # 생성된 대본 저장
│   └── temp/                    # 임시 영상 파일
├── logs/                        # 로그 파일
├── docs/
│   ├── prd.md                   # 본 문서
│   └── api-docs.md              # API 문서
├── tests/
│   ├── unit/
│   └── integration/
├── .env.example
├── .gitignore
├── package.json
├── tsconfig.json
└── README.md
```

---

## 8. 데이터 플로우

### 8.1. 상세 데이터 플로우

#### Step 1: 뉴스 수집

```
[22:00 스케줄 트리거]
         │
         ▼
[RSS 피드 요청] ──────► [RSS 파싱] ──────► [뉴스 객체 생성]
         │                                        │
[Google News 크롤링] ──► [HTML 파싱] ──────► [뉴스 객체 생성]
         │                                        │
[언론사 크롤링] ──────► [HTML 파싱] ──────► [뉴스 객체 생성]
         │                                        │
         └────────────────┬───────────────────────┘
                          ▼
          [제목 기반 1차 필터링 (Gemini)]
                          │
                          ▼
                  [크롤링 15개 → 본문 추출]
                          │
                          ▼
          [본문 기반 2차 필터링 (Gemini)]
                          │
                          ▼
                  [최종 3-5개 반환]
```

**데이터 구조:**

```typescript
interface NewsItem {
  title: string; // 뉴스 제목
  summary: string; // 요약/리드
  url: string; // 원문 링크
  publishedAt: Date; // 발행 시간
  source: string; // 언론사명
  category?: string; // 카테고리
  content?: string; // 기사 본문 (크롤링으로 추출)
}
```

#### Step 2: 대본 생성

```
[최종 뉴스 3-5개]
     │
     ▼
[Gemini API 호출]
     │ (Prompt: 쇼츠용 대본 생성)
     │
     ▼
[대본 텍스트 반환]
```

#### Step 3: 영상 생성

```
[대본 텍스트]
     │
     ▼
[Veo3 API 요청 (via Vertex AI)]
     │ (body: {
     │   prompt: string (대본 기반 비디오 프롬프트),
     │   aspectRatio: "9:16" (세로형),
     │   duration: "~60s"
     │ })
     │
     ▼
[작업 ID 수신]
     │
     ▼
[폴링 시작] (30초 간격)
     │
     ├──► [상태 확인 API 호출]
     │         │
     │         ├──► [진행 중] ──► [대기 30초] ──► [재확인]
     │         │
     │         └──► [완료] ──────────┐
     │                               │
     └───────────────────────────────┘
                     │
                     ▼
          [영상 URL 다운로드]
                     │
                     ▼
          [로컬 파일 저장]
                     │
                     ▼
          [파일 경로 반환]
```

**데이터 구조:**

```typescript
interface VideoJob {
  jobId: string; // Veo3 작업 ID
  status: 'pending' | 'processing' | 'completed' | 'failed';
  videoUrl?: string; // 완성된 영상 URL
  localPath?: string; // 로컬 저장 경로
  createdAt: Date;
  completedAt?: Date;
}
```

#### Step 4: YouTube 업로드

```
[영상 파일]
     │
     ▼
[OAuth 토큰 검증 & YouTube 업로드]
     │
     ▼
[URL 추출 & 로그 기록]
```

### 8.2. 전체 프로세스 타임라인

```
22:00:00  ─┐  뉴스 수집 & 필터링 (60초)
22:01:00  ─┤  대본 생성 (3초, Gemini)
22:01:03  ─┤  Veo3 영상 제작 (3-5분)
22:05:00  ─┤  YouTube 업로드 (1-2분)
22:07:00  ─┘  완료
```

**예상 총 소요 시간:** 약 7분

---

## 9. 비기능 요구사항

### 9.1. 성능 요구사항

| 요구사항 ID | 설명                    | 목표     |
| ----------- | ----------------------- | -------- |
| NFR-PERF-01 | 뉴스 수집 & 필터링 시간 | 60초 이내 |
| NFR-PERF-02 | 대본 생성 응답 시간     | 5초 이내 |
| NFR-PERF-03 | Veo3 영상 생성 시간     | 5분 이내 |
| NFR-PERF-04 | YouTube 업로드 시간     | 3분 이내 |
| NFR-PERF-05 | 전체 프로세스 완료 시간 | 10분 이내 |

### 9.2. 가용성 요구사항

| 요구사항 ID  | 설명               | 목표               |
| ------------ | ------------------ | ------------------ |
| NFR-AVAIL-01 | 시스템 가동률      | 99% 이상 (월 기준) |
| NFR-AVAIL-02 | 일일 자동화 성공률 | 95% 이상           |
| NFR-AVAIL-03 | 외부 API 장애 대응 | 재시도 로직 포함   |

### 9.3. 확장성 요구사항

| 요구사항 ID | 설명                  | 목표                |
| ----------- | --------------------- | ------------------- |
| NFR-SCAL-01 | 다국가 지원 확장 가능 | 모듈화된 구조       |
| NFR-SCAL-02 | 뉴스 소스 추가 용이성 | 플러그인 방식       |
| NFR-SCAL-03 | 영상 형식 다양화      | 설정 기반 변경 가능 |

### 9.4. 보안 요구사항

| 요구사항 ID | 설명                | 목표                       |
| ----------- | ------------------- | -------------------------- |
| NFR-SEC-01  | API 키 관리         | 환경 변수로 관리, Git 제외 |
| NFR-SEC-02  | OAuth 토큰 보안     | 암호화 저장                |
| NFR-SEC-03  | 로그 민감 정보 보호 | API 키/토큰 마스킹         |

### 9.5. 유지보수성 요구사항

| 요구사항 ID | 설명          | 목표                       |
| ----------- | ------------- | -------------------------- |
| NFR-MAIN-01 | 코드 커버리지 | 70% 이상 (핵심 로직)       |
| NFR-MAIN-02 | 코드 문서화   | JSDoc 주석 필수            |
| NFR-MAIN-03 | 에러 추적     | 상세 로그 및 스택 트레이스 |

### 9.6. 모니터링 요구사항

| 요구사항 ID | 설명           | 목표                  |
| ----------- | -------------- | --------------------- |
| NFR-MON-01  | 실시간 알림    | 중요 에러 즉시 알림   |
| NFR-MON-02  | 로그 보관 기간 | 최소 30일             |
| NFR-MON-03  | 성공률 추적    | 주간/월간 리포트 가능 |

---

## 10. 제약사항 및 가정

### 10.1. 제약사항

#### 외부 API 제약

- **Gemini API:** Rate limit 존재, 비용 발생
- **Veo3 API:** 영상 생성 시간 제어 불가 (평균 3-5분), Google Cloud 쿼터 제한
- **YouTube API:** 일일 업로드 쿼터 제한 (10,000 units/day)

#### 기술적 제약

- Veo3는 Google Cloud 프로젝트 및 Vertex AI 활성화 필요
- OAuth 토큰은 주기적 갱신 필요
- Veo3 프롬프트 품질이 영상 품질에 직접적 영향

#### 콘텐츠 제약

- 1분 제한으로 다룰 수 있는 이슈 개수 제한적 (2-4개)
- 뉴스 소스의 저작권 및 이용 약관 준수 필요
- YouTube 커뮤니티 가이드라인 준수 필요

### 10.2. 가정

#### 운영 가정

- Express 서버는 안정적인 네트워크 환경에서 실행
- 모든 외부 API 키는 유효하고 쿼터가 충분함
- 서버 시간대는 한국 표준시(KST)로 설정됨

#### 비즈니스 가정

- 한국 경제 뉴스는 매일 충분히 발생함 (최소 20건 이상)
- 대상 청중은 한국어 사용자
- 쇼츠 형식이 대상 청중에게 적합함

#### 기술적 가정

- Veo3는 한국어 프롬프트를 이해하고 적절한 영상 생성 가능
- YouTube Shorts 알고리즘이 세로형 영상을 우대함
- Gemini는 한국 경제 뉴스를 이해하고 분석 가능함
- Veo3는 텍스트 기반 프롬프트로 경제 콘텐츠에 적합한 영상 생성 가능

---

## 11. 성공 지표

### 11.1. 시스템 성공 지표

| 지표                    | 목표      | 측정 방법                  |
| ----------------------- | --------- | -------------------------- |
| 자동화 성공률           | 95% 이상  | 월별 성공/실패 건수 비율   |
| 평균 프로세스 완료 시간 | 12분 이내 | 로그 기반 시간 측정        |
| 시스템 가동률           | 99% 이상  | 서버 다운타임 추적         |
| 에러 알림 응답률        | 100%      | 중요 에러 알림 전송 성공률 |

### 11.2. 콘텐츠 품질 지표

| 지표             | 목표     | 측정 방법               |
| ---------------- | -------- | ----------------------- |
| 이슈 관련성      | 80% 이상 | 수동 리뷰 (주간 샘플링) |
| 대본 톤 일관성   | 90% 이상 | 수동 리뷰 (주간 샘플링) |
| 영상 길이 준수율 | 100%     | 60초 이하 영상 비율     |

### 11.3. 비즈니스 지표

| 지표                  | 목표        | 측정 방법           |
| --------------------- | ----------- | ------------------- |
| 일일 업로드 연속 성공 | 28일 이상   | 연속 성공 일수 추적 |
| YouTube 조회수 증가율 | 월 10% 이상 | YouTube Analytics   |
| 구독자 증가율         | 월 5% 이상  | YouTube Analytics   |

---

## 12. 일정 및 마일스톤

### 12.1. 개발 단계

| 단계                             | 기간 | 주요 작업                                                                      | 산출물                                      |
| -------------------------------- | ---- | ------------------------------------------------------------------------------ | ------------------------------------------- |
| **Phase 1: 설계 및 환경 구축**   | 1주  | - PRD 작성<br>- 기술 스택 선정<br>- 개발 환경 설정<br>- API 키 발급            | - PRD 문서<br>- 개발 환경<br>- .env.example |
| **Phase 2: 코어 모듈 개발**      | 2주  | - 뉴스 수집 모듈<br>- 이슈 추출 모듈<br>- 대본 생성 모듈                       | - 3개 코어 모듈<br>- 단위 테스트            |
| **Phase 3: 영상 생성 및 업로드** | 2주  | - Veo3 연동 (Vertex AI)<br>- YouTube 업로드<br>- OAuth 구현                   | - 영상 생성 모듈<br>- 업로드 모듈           |
| **Phase 4: 자동화 및 모니터링**  | 1주  | - 스케줄러 구현<br>- 로깅 시스템<br>- 에러 알림                                | - 완전 자동화 시스템<br>- 모니터링 대시보드 |
| **Phase 5: 테스트 및 배포**      | 1주  | - 통합 테스트<br>- 실제 환경 테스트<br>- 배포                                  | - 프로덕션 배포<br>- 운영 매뉴얼            |

**총 예상 기간:** 7주

### 12.2. 주요 마일스톤

| 마일스톤           | 예상 완료일 | 완료 기준                     |
| ------------------ | ----------- | ----------------------------- |
| M1: 개발 환경 완료 | Week 1      | 모든 API 키 설정 완료         |
| M2: 뉴스 수집 완료 | Week 2      | 20개 이상 뉴스 수집 성공      |
| M3: AI 분석 완료   | Week 3      | 이슈 추출 + 대본 생성 성공    |
| M4: 영상 생성 완료 | Week 5      | Veo3 영상 1개 생성 성공       |
| M5: 첫 자동 업로드 | Week 6      | YouTube 쇼츠 자동 업로드 성공 |
| M6: 7일 연속 성공  | Week 7      | 7일 연속 자동화 성공          |

---

## 13. 향후 확장 계획

### 13.1. Phase 2 기능

#### 13.1.1. 미국 경제 뉴스 버전

- 미국 경제 뉴스 소스 추가
- 영어 대본 생성
- 별도 YouTube 채널 또는 플레이리스트 관리
- 미국 시장 시간에 맞춘 스케줄링

#### 13.1.2. 다중 언어 지원

- 영어, 일본어, 중국어 번역
- 각 언어별 TTS 및 캐릭터
- 다중 채널 관리

#### 13.1.3. 콘텐츠 A/B 테스트

- 다양한 대본 톤 실험
- 캐릭터/배경 조합 테스트
- 업로드 시간 최적화
- 썸네일 자동 생성 및 테스트

### 13.2. Phase 3 기능

#### 13.2.1. 인터랙티브 기능

- 사용자 댓글 분석
- 요청 이슈 우선 순위 반영
- 실시간 투표 시스템

#### 13.2.2. 플랫폼 확장

- Instagram Reels 업로드
- TikTok 업로드
- 네이버 블로그 자동 포스팅

#### 13.2.3. 분석 대시보드

- 실시간 조회수 모니터링
- 이슈별 인기도 분석
- 사용자 참여도 분석

### 13.3. 기술 부채 관리

- 데이터베이스 도입 (현재 파일 기반 → PostgreSQL/MongoDB)
- 마이크로서비스 아키텍처로 전환
- 컨테이너화 (Docker) 및 오케스트레이션 (Kubernetes)
- CI/CD 파이프라인 구축

---

## 14. 부록

### 14.1. API 명세 (간략)

#### 14.1.1. Gemini API 사용 예시

**뉴스 필터링 프롬프트:**

```
당신은 밤 11시, 침대에서 쇼츠를 넘기는 25-40대 직장인의 뇌를 해킹하는 경제 콘텐츠 PD입니다.
아래 뉴스 중 3초 안에 스크롤을 멈추게 만들 뉴스 5개를 선별하세요.
(The Hook Test, Action Trigger, 45초 Rule, 바이럴 DNA 기준 적용)
```

**대본 생성 프롬프트:**

```
최종 선정된 3-5개 뉴스를 바탕으로 45-60초 분량의 쇼츠 대본 작성
- 첫 3초 Hook: 시청자 주의 끌기
- 핵심 내용: 간결하고 자극적으로
- 행동 유도: 공유하고 싶게 만들기
```

#### 14.1.2. Veo3 API 호출 예시 (via Vertex AI)

```typescript
// Google Vertex AI - Veo3 API 호출
import { VertexAI } from '@google-cloud/vertexai';

const vertexAI = new VertexAI({
  project: process.env.GOOGLE_CLOUD_PROJECT_ID,
  location: process.env.GOOGLE_VERTEX_AI_LOCATION
});

// 영상 생성 요청
const response = await vertexAI.preview.generateVideo({
  model: 'veo-3',
  prompt: '대본을 기반으로 한 비디오 생성 프롬프트...',
  aspectRatio: '9:16',  // 세로형
  duration: 60  // 초
});

// Response
{
  "operationId": "abc123",
  "status": "PENDING"
}

// 상태 확인
const status = await vertexAI.preview.getOperation({
  operationId: "abc123"
});

// 완료 시 Response
{
  "status": "COMPLETED",
  "videoUrl": "gs://bucket-name/video.mp4"
}
```

#### 14.1.3. YouTube Data API 업로드 예시

```typescript
// POST https://www.googleapis.com/upload/youtube/v3/videos
// Headers: Authorization: Bearer {access_token}
// Body: multipart/form-data

{
  snippet: {
    title: "오늘의 한국 경제 한 줄 브리핑 (2025-12-17) #shorts",
    description: "주요 이슈:\n1. 금리 동결\n2. 환율 급등...",
    tags: ["한국경제", "경제뉴스", "shorts"],
    categoryId: "25" // 뉴스 및 정치
  },
  status: {
    privacyStatus: "public"
  }
}
```

### 14.2. 에러 코드 정의

| 코드           | 설명                          | 복구 방법                |
| -------------- | ----------------------------- | ------------------------ |
| ERR_NEWS_001   | 뉴스 수집 실패                | 재시도 3회               |
| ERR_NEWS_002   | 수집된 뉴스 부족 (20개 미만)  | 소스 추가 또는 알림      |
| ERR_LLM_001    | Gemini API 호출 실패          | 재시도 3회               |
| ERR_LLM_002    | 응답 파싱 실패                | 프롬프트 수정 필요       |
| ERR_VEO3_001   | 영상 생성 요청 실패           | 재시도 2회               |
| ERR_VEO3_002   | 영상 생성 타임아웃 (10분 초과) | 알림 전송                |
| ERR_VEO3_003   | Vertex AI 인증 실패           | 자격증명 확인            |
| ERR_YOUTUBE_001 | OAuth 토큰 만료               | 자동 갱신 시도           |
| ERR_YOUTUBE_002 | 업로드 실패                   | 재시도 2회               |
| ERR_YOUTUBE_003 | 쿼터 초과                     | 알림 전송, 다음날 재시도 |

### 14.3. 로그 형식

```
[2025-12-17 22:00:00] [INFO] Daily job started
[2025-12-17 22:01:00] [INFO] News filtering completed: 3 articles selected
[2025-12-17 22:01:03] [INFO] Script generation completed (Gemini)
[2025-12-17 22:01:05] [INFO] Veo3 job submitted: operation_abc123
[2025-12-17 22:05:00] [INFO] Video generation completed
[2025-12-17 22:07:00] [INFO] YouTube upload completed: https://youtube.com/shorts/xyz789
[2025-12-17 22:07:05] [INFO] Daily job completed successfully in 7m 5s
```

### 14.4. 참고 자료

#### 공식 문서

- [Gemini API Documentation](https://ai.google.dev/gemini-api/docs)
- [Google Vertex AI - Veo3 Documentation](https://cloud.google.com/vertex-ai/docs)
- [YouTube Data API v3](https://developers.google.com/youtube/v3)
- [node-cron Documentation](https://www.npmjs.com/package/node-cron)

#### 관련 기술

- [Express.js Guide](https://expressjs.com/en/guide/routing.html)
- [TypeScript Handbook](https://www.typescriptlang.org/docs/)
- [OAuth 2.0 Specification](https://oauth.net/2/)

### 14.5. 용어집

| 용어  | 영문                              | 설명                               |
| ----- | --------------------------------- | ---------------------------------- |
| 쇼츠  | Shorts                            | YouTube의 세로형 짧은 동영상 형식  |
| 폴링  | Polling                           | 주기적으로 상태를 확인하는 방식    |
| 크론  | Cron                              | 시간 기반 작업 스케줄러            |
| OAuth | OAuth                             | 인증을 위한 개방형 표준 프로토콜   |
| TTS   | Text-to-Speech                    | 텍스트 음성 변환                   |
| API   | Application Programming Interface | 애플리케이션 프로그래밍 인터페이스 |
| LLM   | Large Language Model              | 대규모 언어 모델                   |
| RSS   | Really Simple Syndication         | 뉴스 및 블로그 피드 형식           |

---

## 문서 변경 이력

| 버전  | 날짜       | 작성자       | 변경 내용                            |
| ----- | ---------- | ------------ | ------------------------------------ |
| 1.0.0 | 2025-12-17 | Product Team | 초안 작성                            |
| 1.0.1 | 2025-12-17 | Product Team | 목차 번호 수정 및 불필요한 내용 삭제 |
| 1.1.0 | 2026-01-08 | Product Team | HeyGen → Veo3 전환 (영상 생성 모듈 변경) |
